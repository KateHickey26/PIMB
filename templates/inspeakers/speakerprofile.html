{% extends 'inspeakers/base.html' %}
{% load staticfiles %}
{% load ratings %}
{% load inspeakers_template_tags %}
{% block title_block %}
  Speaker profile
{% endblock %}
{% block body_block %}
<script type="text/javascript" src="//code.jquery.com/jquery-2.1.0.js"></script>
<script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}">
<script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>

<div class="container">
  <div class="row my-3">

      <div class="col-md-4">
          <div class="profile-img" style="overflow: hidden; position: relative; width: 300px; height:300">
          <img src="{{ MEDIA_URL }}{{speaker.picture}}" alt="Speaker profile picture" />
          <!--  <img src="https://www.aboutmanchester.co.uk/wp-content/uploads/2018/05/speaker.jpg"
        alt="speaker image" height="400" width="250"/> -->
          </div>
          {% if user == speaker.speaker %}
          <form action="{% url 'inspeakers:speaker_profile' speaker.slug %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input id="imageUpload" type="file" name="profile_photo" placeholder="Photo" required="" capture>
            <input class="btn btn-primary my-2 px-2" type="submit" value="Upload">
          </form>
          {% endif %}
      </div>

      <div class="col-md-6">
        <div class="profile-head">
          <h2 style="height:50px;">
            {{speaker.name}}
          </h2>

        <div class="tabs">
          <ul class="nav nav-tabs" id="profiletab">
            <li class="nav-item">
              <a class="nav-link active" id="about-tab" data-toggle="tab" href="#about" role="tab" aria-controls="about" aria-selected="true">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="deatils-tab" data-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="false">Booking Details</a>
            </li>
          </ul>
          <div class="col-md-8">
            <div class="tab-content" style="height:300px; overflow:auto; width:500px">
              <div class="tab-pane fade show active" aria-labelledby="about-tab" id="about">
                <div class="row">
                  <div class="col-md-12">
                    <label>Your Bio</label><br/>
                      <p>{{speaker.description}}</p>
                  </div>
                </div>
              </div>

            <div class="tab-pane fade" aria-labelledby="details-tab" id="details">

                    <div class="row">
                      <div class="col-md-6">
                        <label>Management Company</label>
                      </div>
                      <div class="col-md-6">
                        <p>{{speaker.company}}</p>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6">
                        <label>Email</label>
                      </div>
                        <div class="col-md-6">
                          <p>{{speaker.email}}</p>
                        </div>
                    </div>

                      <div class="row">
                        <div class="col-md-6">
                          <label>Phone</label>
                        </div>
                          <div class="col-md-6">
                            <p>{{speaker.phone}}</p>
                          </div>
                      </div>

                        <div class="row">
                          <div class="col-md-6">
                            <label>Experience</label>
                              </div>
                              <div class="col-md-6">
                                  <p>{{speaker.experience}}</p>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-6">
                            <label>Hourly Rate</label>
                          </div>
                            <div class="col-md-6">
                              <p>{{speaker.hourlyrate}}</p>
                            </div>
                        </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div class="row">
      <div class="col-md-8">
        <div class="profile-work">
          <strong><p>Check Me Out</p></strong>
          <a href="{{speaker.youtube}}">Youtube</a><br/>
          <a href="{{speaker.twitter}}">@Twitter</a><br/>
          <a href="{{speaker.ins}}">@Instagram</a><br/>
          <a href="{{speaker.website}}">Website</a><br/>
          <strong><p>My Tags</p></strong>
          {% get_tags speaker %}
        </div>
      </div>
      <div class="col-md-4 align-self-right">
        {% if user == speaker.speaker %}
        <form action="{%url 'inspeakers:speaker_profile_edit' %}" method="get">
          <button class="btn btn-primary my-2 px-2">Edit</button>
        </form>
        {% endif %}
        {% if user.is_authenticated %}
            {% if not fav %}
            <form action="{%url 'inspeakers:speaker_profile' speaker.slug%}" method="get">
              <button type="submit" name="fav" value="1" class="btn btn-primary my-2 px-2">Add to My Favourites</button>
            </form>
            {% else %}
            <form action="{%url 'inspeakers:speaker_profile' speaker.slug%}" method="get">
              <button type="submit" name="fav" value="0" class="btn btn-primary my-2 px-2">Remove from My Favourite</button>
            </form>
            {% endif %}
        {% endif %}
      </div>
    </div>
</div>

<div class='rating'>
            {% with rating_type='average_rating' rating_initial=speaker.average_rating %}
                Average Rating
                {% include 'inspeakers/starrating.html'%}
            {% endwith %}
        </div>


<div class='comments' id='comments'>
  <div class="row">
    <div class="col-md-8 card mb-4  mt-3 ">
        <h2>Comments</h2>

      <div class='previous_comments'>
        <!-- comments -->
      <h3> Previous Reviews </h3>
        # below lines loops over comments
        <ul>
          {% for comment in comments %}
            {% include "inspeakers/review.html" %}
          {% endfor %}
        </ul>
      </div>

      <h2> Leave a Comment </h2>
        {% if user.is_authenticated %}
          <div class='addcomment'>
            {% include "inspeakers/addcomment.html" %}
          </div>
        {% else %}
        <a href="{% url 'inspeakers:login' %}">Please log in to leave a new comment! </a>
         {% endif %}
    </div>
  </div>
</div>


{% endblock %}
